rm .local -fr

neurodocker generate docker \
    --base=neurodebian:buster-non-free --pkg-manager=apt \
    --install apt-utils git ssh python3-pip gcc python3-setuptools python3-dev python3-wheel \
    fsl file \
    graphviz \
    --add-to-entrypoint='source /etc/fsl/fsl.sh' \
    --user neuro \
    --env USER=neuro \
    --env PATH='${PATH}:/home/neuro/.local/bin:/home/neuro/bin' \
    > dockerfile

docker build --tag basic .

docker run -i -t --rm \
    --name running \
    --user neuro \
    -v /home/gio/tools/boavus:/home/neuro \
    -w /home/neuro \
    basic \
    bash docker_tests.sh

docker exec -i -t running bash -c 'echo $PATH'

docker exec running rm .local -fr
docker exec running rm .cache -fr
docker exec -i -t running source /etc/fsl/fsl.sh
docker exec running pip3 install --user -e .
docker exec running bash -c "fsl5.0-flirt -version"
docker exec running pip3 install --user pytest pytest-cov coverage




docker stop -t 0 running
docker rm running
